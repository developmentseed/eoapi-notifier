apiVersion: v1
kind: ConfigMap
metadata:
  name: {{include "eoapi-notifier.fullname" .}}
  labels:
    {{- include "eoapi-notifier.labels" . | nindent 4}}
data:
  config.yaml: |
    # eoAPI Notifier Configuration
    # Environment variables automatically override config values (e.g., HOST env var overrides host config)
    sources:
    {{- range .Values.config.sources}}
      - type: {{.type}}
        config:
          {{- toYaml .config | nindent 10}}
    {{- end}}

    outputs:
    {{- range .Values.config.outputs}}
      - type: {{.type}}
        config:
          {{- toYaml .config | nindent 10}}
    {{- end}}
